{"version":3,"sources":["app.js"],"names":["app","preInit","webshim","setOptions","lazyCustomMessages","replaceValidationUI","polyfill","init","HTML_EL","document","documentElement","BODY","body","FORMS","querySelectorAll","THANKS_LOCATION","name","$","inputmask","greedy","clearIncomplete","addClass","onKeyDown","event","buffer","length","removeClass","slick","prevArrow","nextArrow","setPhoneLinkAction","md","MobileDetect","window","navigator","userAgent","phoneLink","phoneData","getAttribute","mobile","i","setAttribute","classList","remove","j","add","hideForm","addEventListener","e","targetClickHandler","classes","el","target","elCls","curClass","contains","formAction","closeAllForms","setInputTitle","titleVal","querySelector","innerText","forms","inputTitles","form","formInput","createInputEl","insertBefore","firstElementChild","input","value","createElement","type","wl","callbacks","onFormSubmit","$form","res","data","status","smallFormHandler","def","bigFormHandler","formsHandler","hasAttribute","preventDefault","setInputValues","userInfo","localStorage","getItem","JSON","parse","phone","email","city","selfName","find","selfPhone","selfEmail","selfCity","formData","serialize","landUserInfo","val","setItem","stringify","ajax","url","success","location","closeBigForm","smallFormWrap","bigFormWrap","formsWrap","openSmallForm","openBigForm","callback","closeSmallForm","thanksPageHandler","isThanksPage","setUserName","showSmallForm","smallBtns","smallBtnClick","smallBtn","text","imgLoad","animate","checkViewport","elem","dur","elemDOM","duration","setTimeout","screenHeight","clientHeight","elBounding","elBottom","compareSizes","getBoundingClientRect","bottom"],"mappings":"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","file":"app.js","sourcesContent":["/*global webshim $ wl MobileDetect*/\r\n\r\n\r\nvar app = {\r\n\r\n    preInit: function() {\r\n        \r\n        // form polyfill\r\n        (function() {\r\n            webshim.setOptions('forms', {\r\n                lazyCustomMessages: true,\r\n                replaceValidationUI: true\r\n            });\r\n            webshim.polyfill('forms');\r\n        }());\r\n    },\r\n    \r\n    init: function() {\r\n        \r\n        var HTML_EL = document.documentElement;\r\n        var BODY = document.body;\r\n        var FORMS = document.querySelectorAll(\"form\");\r\n\r\n        var THANKS_LOCATION = \"thanks.html\";\r\n        var name;\r\n\r\n        // form phone input handler\r\n        $(\"input[name=phone]\").inputmask({\r\n            \"mask\": \"+9(999)999-9999\",\r\n            greedy: false,\r\n            clearIncomplete: true,\r\n            \"oncomplete\": function(){\r\n                $(this).addClass(\"input_success\");\r\n            },\r\n            onKeyDown: function(event, buffer) {\r\n\r\n                if (buffer[buffer.length - 1] === \"_\") {\r\n                    $(this).removeClass(\"input_success\");\r\n                } else {\r\n                    $(this).addClass(\"input_success\");\r\n                }\r\n            }\r\n        });\r\n\r\n\r\n        // gallery\r\n        $(\".js-sec3-gallery\").slick({\r\n            //arrows: false,\r\n            prevArrow: \".js-sec3-gallery-arrow-left\",\r\n            nextArrow: \".js-sec3-gallery-arrow-right\",\r\n        });\r\n\r\n\r\n        // open form on PC or open app on mobile\r\n        (function setPhoneLinkAction() {\r\n            var md = new MobileDetect(window.navigator.userAgent);\r\n            var phoneLink = document.querySelectorAll('[data-phone]');\r\n            var phoneData = phoneLink[0].getAttribute(\"data-phone\");\r\n\r\n            if(phoneLink) {\r\n\r\n                if (md.mobile()) {\r\n\r\n                    for(var i = 0; i < phoneLink.length; i++) {\r\n                        phoneLink[i].setAttribute(\"href\", \"tel:\" + phoneData);\r\n                        phoneLink[i].classList.remove(\"js-small-btn\");\r\n                    }\r\n                } else {\r\n\r\n                    for(var j = 0; j < phoneLink.length; j++) {\r\n                        phoneLink[j].setAttribute(\"href\", \"\");\r\n                        phoneLink[j].classList.add(\"js-small-btn\");\r\n                    }\r\n                }\r\n            }\r\n        }());\r\n\r\n\r\n        // close form on click close-btn and background\r\n        (function hideForm() {\r\n\r\n            BODY.addEventListener(\"click\", function(e) {\r\n                targetClickHandler(e, [\"form-wrap\", \"form__close\"]);\r\n            });\r\n\r\n            function targetClickHandler(event, classes) {\r\n                var el = event.target;\r\n                var elCls = el.classList;\r\n\r\n                for (var i = 0; i < classes.length; i++) {\r\n                    var curClass = classes[i];\r\n\r\n                    if (elCls.contains(curClass)) {\r\n                        formAction().closeAllForms();\r\n                    }\r\n                    \r\n                }\r\n            }\r\n        }());\r\n\r\n\r\n        // create input with name = title for phpMail handler\r\n        (function setInputTitle() {\r\n            var titleVal = document.querySelector(\"title\").innerText;\r\n            var forms = document.querySelectorAll(\"form\");\r\n            var inputTitles;\r\n            \r\n            for (var i = 0; i < forms.length; i++) {\r\n                var form = forms[i];\r\n                var formInput = createInputEl();\r\n                form.insertBefore(formInput, form.firstElementChild);\r\n            }\r\n\r\n            inputTitles = document.querySelectorAll(\".js-hidden-title\");\r\n\r\n            for (var j = 0; j < inputTitles.length; j++) {\r\n                var input = inputTitles[j];\r\n                input.value = titleVal;\r\n            }\r\n\r\n            function createInputEl() {\r\n                var input = document.createElement(\"input\");\r\n                input.classList.add(\"js-hidden-title\");\r\n                input.name = \"title\";\r\n                input.type = \"hidden\";\r\n                \r\n                return input;\r\n            }\r\n        }());\r\n\r\n        if (typeof wl != \"undefined\") {\r\n\r\n            wl.callbacks.onFormSubmit = function ($form, res) {\r\n                if ($form.data('next')) {\r\n                \r\n                    if(res.status == 200) {\r\n                        smallFormHandler($form);\r\n                    } else {  \r\n                        wl.callbacks.def.onFormSubmit($form, res);\r\n                    }\r\n                } else {\r\n                    bigFormHandler($form);\r\n                }\r\n            };\r\n        } else {\r\n\r\n            formsHandler();\r\n        }\r\n\r\n        // function formsHandler(options) {\r\n        //     var firstForms = options.firstForms;\r\n        //     var secondForm = options.secondForms;\r\n        //     var openFormBtn = options.openFormBtn;\r\n\r\n        //     openFormBtn.addEventListener(\"click\", function() {\r\n\r\n        //     });\r\n\r\n        //     function openSmallForm() {\r\n                \r\n        //     }\r\n        // }\r\n\r\n        function formsHandler() {\r\n\r\n            for(var i = 0; i < FORMS.length; i++) {\r\n                var form = FORMS[i];\r\n\r\n                if (form.hasAttribute(\"data-next\")) {\r\n\r\n                    form.addEventListener(\"submit\", function(e) {\r\n                        e.preventDefault();\r\n\r\n                        smallFormHandler($(form));\r\n                    });\r\n                } else {\r\n                    form.addEventListener(\"submit\", function(e) {\r\n                        e.preventDefault();\r\n\r\n                        bigFormHandler($(form));\r\n                    });\r\n                }\r\n            }\r\n        }\r\n\r\n        function setInputValues() {\r\n            var userInfo;\r\n\r\n            if (localStorage.getItem(\"landUserInfo\")) {\r\n                userInfo = JSON.parse(localStorage.getItem(\"landUserInfo\"));\r\n            }\r\n            \r\n            document.querySelector('[name=name1]').value = userInfo.name;\r\n            document.querySelector('[name=phone1]').value = userInfo.phone;\r\n            document.querySelector('[name=email1]').value = userInfo.email;\r\n\r\n            if (userInfo.city !== \"\" && userInfo.city) {\r\n                document.querySelector('[name=city]').value = userInfo.city;\r\n            }\r\n        }\r\n\r\n        function smallFormHandler(form) {\r\n\r\n            var selfName = form.find(\"input[name=name]\");\r\n            var selfPhone = form.find(\"input[name=phone]\");\r\n            var selfEmail = form.find(\"input[name=email]\");\r\n            var selfCity = form.find(\"input[name=city]\");\r\n\r\n            // var selfName = form.querySelector(\"input[name=name]\");\r\n            // var selfPhone = form.querySelector(\"input[name=phone]\");\r\n            // var selfEmail = form.querySelector(\"input[name=email]\");\r\n            // var selfCity = form.querySelector(\"input[name=city]\");\r\n\r\n            var formData = form.serialize();\r\n\r\n            var landUserInfo = {\r\n                \"name\": selfName.val(),\r\n                \"phone\": selfPhone.val(),\r\n                \"email\": selfEmail.val(),\r\n                \"city\": selfCity.val()\r\n            }\r\n\r\n            localStorage.setItem(\"landUserInfo\", JSON.stringify(landUserInfo));\r\n\r\n            name = selfName.val();\r\n\r\n            $.ajax({\r\n                type: \"POST\",\r\n                url: \"php/send.php\",\r\n                data: formData,\r\n                success: function() {\r\n                    window.location = THANKS_LOCATION;\r\n                }\r\n            });\r\n\r\n            if (name) {\r\n                localStorage.setItem(\"landclientname\", name + \", наши\");\r\n            } else {\r\n                localStorage.setItem(\"landclientname\", \"Наши\");\r\n            }\r\n        }\r\n\r\n        function bigFormHandler(form) {\r\n            var formData;\r\n            formData = form.serialize();\r\n\r\n            $.ajax({\r\n                type: \"POST\",\r\n                url: \"php/sendpresent.php\",\r\n                data: formData,\r\n                success: function() {\r\n                    formAction().closeBigForm();\r\n                }\r\n            });\r\n        }\r\n\r\n        function formAction() {\r\n            var smallFormWrap = document.querySelector(\".form-wrap_small\");\r\n            var bigFormWrap = document.querySelector(\".form-wrap_big\");\r\n            var formsWrap = document.querySelectorAll(\".form-wrap\");\r\n\r\n            return {\r\n\r\n                openSmallForm: function() {\r\n                    HTML_EL.classList.add(\"form-open\");\r\n                    smallFormWrap.classList.add(\"form-wrap_open\");\r\n                },\r\n\r\n                openBigForm: function(callback) {\r\n                    HTML_EL.classList.add(\"form-open\");\r\n                    bigFormWrap.classList.add(\"form-wrap_open\");\r\n\r\n                    callback();\r\n                },\r\n\r\n                closeSmallForm: function() {\r\n                    HTML_EL.classList.remove(\"form-open\");\r\n                    smallFormWrap.classList.remove(\"form-wrap_open\");\r\n                },\r\n\r\n                closeBigForm: function() {\r\n                    HTML_EL.classList.remove(\"form-open\");\r\n                    bigFormWrap.classList.remove(\"form-wrap_open\");\r\n                },\r\n\r\n                closeAllForms: function() {\r\n                    HTML_EL.classList.remove(\"form-open\");\r\n\r\n                    for (var i = 0; i < formsWrap.length; i++) {\r\n                        var form = formsWrap[i];\r\n                        form.classList.remove(\"form-wrap_open\");\r\n                    }\r\n                    \r\n                }\r\n            }\r\n        }\r\n\r\n\r\n        // actions on page thanks.html\r\n        (function thanksPageHandler() {\r\n\r\n            if (isThanksPage()) {\r\n                formAction().openBigForm(setInputValues);\r\n                setUserName();\r\n            } else {\r\n                showSmallForm();\r\n            }\r\n\r\n            function isThanksPage() {\r\n\r\n                if ( document.querySelector(\".thanks\") ) {\r\n                    return true;\r\n                } else {\r\n                    return false;\r\n                }\r\n            }\r\n        }());\r\n\r\n\r\n        // show small form\r\n        function showSmallForm() {\r\n            var smallBtns = document.querySelectorAll(\".js-small-btn\");\r\n            \r\n            var smallBtnClick = function(e) {\r\n                e.preventDefault();\r\n                \r\n                formAction().openSmallForm();\r\n            };\r\n\r\n            if (smallBtns) {\r\n\r\n                for (var i = 0; i < smallBtns.length; i++) {\r\n                    var smallBtn = smallBtns[i];\r\n\r\n                    smallBtn.addEventListener(\"click\", smallBtnClick);\r\n                }\r\n            }\r\n        }\r\n\r\n        function setUserName() {\r\n            $(\"#thanksName\").text(localStorage.getItem(\"landclientname\"));\r\n        }\r\n    },\r\n\r\n    imgLoad: function() {\r\n        \r\n        (function() {\r\n            if (document.documentElement.classList.contains(\"preloader-show\")) {\r\n                document.documentElement.classList.remove(\"preloader-show\")\r\n            }\r\n            \r\n        })();\r\n\r\n        // animations\r\n        (function() {\r\n            animate(\".sec1__curtain-top\", \"sec1__curtain-top_before-ready\");\r\n            animate(\".sec1__clouds\", \"sec1__clouds_before-ready\");\r\n            animate(\".sec1__curtain-side\", \"sec1__curtain-side_before-ready\");\r\n\r\n            checkViewport(\".sec7__cloud_1\", function() {\r\n                animate(\".sec7__cloud_1\", \"sec7__cloud_before-ready\", 0)\r\n            });\r\n\r\n            checkViewport(\".sec7__cloud_2\", function() {\r\n                animate(\".sec7__cloud_2\", \"sec7__cloud_before-ready\", 0)\r\n            });\r\n\r\n            function animate(elem, removeClass, dur) {\r\n                var elemDOM = document.querySelectorAll(elem);\r\n                var duration = dur || 500;\r\n\r\n                if (elemDOM) {\r\n\r\n                    setTimeout(function() {\r\n\r\n                        for (var i = 0; i < elemDOM.length; i++) {\r\n                            var elem = elemDOM[i];\r\n                            elem.classList.remove(removeClass);\r\n                        }\r\n                    }, duration);\r\n                }\r\n            }\r\n\r\n            function checkViewport(elem, callback) {\r\n                var screenHeight = document.documentElement.clientHeight;\r\n                var el = document.querySelector(elem);\r\n                var elBounding;\r\n                var elBottom;\r\n                //var elTop;\r\n\r\n                window.addEventListener(\"scroll\", function() {\r\n                    // console.log(\"screenHeight: \" + screenHeight);\r\n                    // console.log(\"elTop: \" + elTop);\r\n                    // console.log(\"elBottom: \" + elBottom);\r\n                    compareSizes();\r\n                });\r\n\r\n                compareSizes();\r\n\r\n                function compareSizes() {\r\n                    elBounding = el.getBoundingClientRect();\r\n                    elBottom = elBounding.bottom;\r\n                    //elTop = elBounding.top;\r\n\r\n                    if (elBottom <= screenHeight) {\r\n                        callback();\r\n                    }\r\n                }\r\n            }\r\n        })();\r\n    }\r\n}\r\n\r\napp.preInit();\r\ndocument.addEventListener(\"DOMContentLoaded\", app.init);\r\nwindow.addEventListener(\"load\", app.imgLoad);"]}